---
title: "建造者模式 (Builder)"
date: 2021-12-04T16:29:53+08:00
draft: false
tags: [设计模式]
categories: [笔记] 
---

# 定义

在构建对象的时候，避免构造函数参数污染。一步一步构造出复杂的对象。

与工厂方法模式的区别是：建造者模式更加构建的顺序。

换句话说，当构建过程只需要一个步骤时使用**工厂方法模式**，而当构建过程需要多个步骤时使用**建造者模式**。

**何时使用？**

当需要构建的对象有多个参数，一些基本部件不会变，而其组合经常变化的时候，此时使用。

# 样例

```go
package main

import "fmt"

//Person struct
type Person struct {
	// Personal details
	name, address, pin string
	// Job details
	workAddress, company, position string
	salary                         int
}

//PersonBuilder struct
type PersonBuilder struct {
	person *Person
}

//PersonAddressBuilder facet of PersonBuilder
type PersonAddressBuilder struct {
	PersonBuilder
}

//PersonJobBuilder facet of PersonBuilder
type PersonJobBuilder struct {
	PersonBuilder
}

//NewPersonBuilder constructor for PersonBuilder
func NewPersonBuilder() *PersonBuilder {
	return &PersonBuilder{person: &Person{}}
}

//Lives chains to type *PersonBuilder and returns a *PersonAddressBuilder
func (b *PersonBuilder) Lives() *PersonAddressBuilder {
	return &PersonAddressBuilder{*b}
}

//Works chains to type *PersonBuilder and returns a *PersonJobBuilder
func (b *PersonBuilder) Works() *PersonJobBuilder {
	return &PersonJobBuilder{*b}
}

//At adds address to person
func (a *PersonAddressBuilder) At(address string) *PersonAddressBuilder {
	a.person.address = address
	return a
}

//WithPostalCode adds postal code to person
func (a *PersonAddressBuilder) WithPostalCode(pin string) *PersonAddressBuilder {
	a.person.pin = pin
	return a
}

//As adds position to person
func (j *PersonJobBuilder) As(position string) *PersonJobBuilder {
	j.person.position = position
	return j
}

//For adds company to person
func (j *PersonJobBuilder) For(company string) *PersonJobBuilder {
	j.person.company = company
	return j
}

//In adds company address to person
func (j *PersonJobBuilder) In(companyAddress string) *PersonJobBuilder {
	j.person.workAddress = companyAddress
	return j
}

//WithSalary adds salary to person
func (j *PersonJobBuilder) WithSalary(salary int) *PersonJobBuilder {
	j.person.salary = salary
	return j
}

//Build builds a person from PersonBuilder
func (b *PersonBuilder) Build() *Person {
	return b.person
}

//RunBuilderFacet example
func main() {
	pb := NewPersonBuilder()
	pb.Lives().
		At("Bangalore").
		WithPostalCode("560102").
		Works().
		As("Software Engineer").
		For("IBM").
		In("Bangalore").
		WithSalary(150000)

	person := pb.Build()

	fmt.Println(person)
}

```



# 参考文献

1. https://github.com/kamranahmedse/design-patterns-for-humans
2. https://github.com/senghoo/golang-design-pattern

